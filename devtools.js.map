{"version":3,"file":"devtools.js","sources":["src/constants.js","devtools/devtools.js","devtools/index.js"],"sourcesContent":["// render modes\r\n\r\nexport const NO_RENDER = 0;\r\nexport const SYNC_RENDER = 1;\r\nexport const FORCE_RENDER = 2;\r\nexport const ASYNC_RENDER = 3;\r\n\r\n\r\nexport const ATTR_KEY = '__preactattr_';\r\n\r\n// DOM properties that should NOT have \"px\" added when numeric\r\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\r\n\r\n","/* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\r\n\r\nimport { options } from 'preact';\r\n\r\n// Internal helpers from preact\r\nimport { ATTR_KEY } from '../src/constants';\r\n\r\n/**\r\n * Return a ReactElement-compatible object for the current state of a preact\r\n * component.\r\n */\r\nfunction createReactElement(component) {\r\n\treturn {\r\n\t\ttype: component.constructor,\r\n\t\tkey: component.key,\r\n\t\tref: null, // Unsupported\r\n\t\tprops: component.props\r\n\t};\r\n}\r\n\r\n/**\r\n * Create a ReactDOMComponent-compatible object for a given DOM node rendered\r\n * by preact.\r\n *\r\n * This implements the subset of the ReactDOMComponent interface that\r\n * React DevTools requires in order to display DOM nodes in the inspector with\r\n * the correct type and properties.\r\n *\r\n * @param {Node} node\r\n */\r\nfunction createReactDOMComponent(node) {\r\n\tconst childNodes = node.nodeType === Node.ELEMENT_NODE ?\r\n\t\tArray.from(node.childNodes) : [];\r\n\r\n\tconst isText = node.nodeType === Node.TEXT_NODE;\r\n\r\n\treturn {\r\n\t\t// --- ReactDOMComponent interface\r\n\t\t_currentElement: isText ? node.textContent : {\r\n\t\t\ttype: node.nodeName.toLowerCase(),\r\n\t\t\tprops: node[ATTR_KEY]\r\n\t\t},\r\n\t\t_renderedChildren: childNodes.map(child => {\r\n\t\t\tif (child._component) {\r\n\t\t\t\treturn updateReactComponent(child._component);\r\n\t\t\t}\r\n\t\t\treturn updateReactComponent(child);\r\n\t\t}),\r\n\t\t_stringText: isText ? node.textContent : null,\r\n\r\n\t\t// --- Additional properties used by preact devtools\r\n\r\n\t\t// A flag indicating whether the devtools have been notified about the\r\n\t\t// existence of this component instance yet.\r\n\t\t// This is used to send the appropriate notifications when DOM components\r\n\t\t// are added or updated between composite component updates.\r\n\t\t_inDevTools: false,\r\n\t\tnode\r\n\t};\r\n}\r\n\r\n/**\r\n * Return the name of a component created by a `ReactElement`-like object.\r\n *\r\n * @param {ReactElement} element\r\n */\r\nfunction typeName(element) {\r\n\tif (typeof element.type === 'function') {\r\n\t\treturn element.type.displayName || element.type.name;\r\n\t}\r\n\treturn element.type;\r\n}\r\n\r\n/**\r\n * Return a ReactCompositeComponent-compatible object for a given preact\r\n * component instance.\r\n *\r\n * This implements the subset of the ReactCompositeComponent interface that\r\n * the DevTools requires in order to walk the component tree and inspect the\r\n * component's properties.\r\n *\r\n * See https://github.com/facebook/react-devtools/blob/e31ec5825342eda570acfc9bcb43a44258fceb28/backend/getData.js\r\n */\r\nfunction createReactCompositeComponent(component) {\r\n\tconst _currentElement = createReactElement(component);\r\n\tconst node = component.base;\r\n\r\n\tlet instance = {\r\n\t\t// --- ReactDOMComponent properties\r\n\t\tgetName() {\r\n\t\t\treturn typeName(_currentElement);\r\n\t\t},\r\n\t\t_currentElement: createReactElement(component),\r\n\t\tprops: component.props,\r\n\t\tstate: component.state,\r\n\t\tforceUpdate: component.forceUpdate && component.forceUpdate.bind(component),\r\n\t\tsetState: component.setState && component.setState.bind(component),\r\n\r\n\t\t// --- Additional properties used by preact devtools\r\n\t\tnode\r\n\t};\r\n\r\n\t// React DevTools exposes the `_instance` field of the selected item in the\r\n\t// component tree as `$r` in the console.  `_instance` must refer to a\r\n\t// React Component (or compatible) class instance with `props` and `state`\r\n\t// fields and `setState()`, `forceUpdate()` methods.\r\n\tinstance._instance = component;\r\n\r\n\t// If the root node returned by this component instance's render function\r\n\t// was itself a composite component, there will be a `_component` property\r\n\t// containing the child component instance.\r\n\tif (component._component) {\r\n\t\tinstance._renderedComponent = updateReactComponent(component._component);\r\n\t} else {\r\n\t\t// Otherwise, if the render() function returned an HTML/SVG element,\r\n\t\t// create a ReactDOMComponent-like object for the DOM node itself.\r\n\t\tinstance._renderedComponent = updateReactComponent(node);\r\n\t}\r\n\r\n\treturn instance;\r\n}\r\n\r\n/**\r\n * Map of Component|Node to ReactDOMComponent|ReactCompositeComponent-like\r\n * object.\r\n *\r\n * The same React*Component instance must be used when notifying devtools\r\n * about the initial mount of a component and subsequent updates.\r\n */\r\nlet instanceMap = typeof Map==='function' && new Map();\r\n\r\n/**\r\n * Update (and create if necessary) the ReactDOMComponent|ReactCompositeComponent-like\r\n * instance for a given preact component instance or DOM Node.\r\n *\r\n * @param {Component|Node} componentOrNode\r\n */\r\nfunction updateReactComponent(componentOrNode) {\r\n\tconst newInstance = componentOrNode instanceof Node ?\r\n\t\tcreateReactDOMComponent(componentOrNode) :\r\n\t\tcreateReactCompositeComponent(componentOrNode);\r\n\tif (instanceMap.has(componentOrNode)) {\r\n\t\tlet inst = instanceMap.get(componentOrNode);\r\n\t\tObject.assign(inst, newInstance);\r\n\t\treturn inst;\r\n\t}\r\n\tinstanceMap.set(componentOrNode, newInstance);\r\n\treturn newInstance;\r\n}\r\n\r\nfunction nextRootKey(roots) {\r\n\treturn '.' + Object.keys(roots).length;\r\n}\r\n\r\n/**\r\n * Find all root component instances rendered by preact in `node`'s children\r\n * and add them to the `roots` map.\r\n *\r\n * @param {DOMElement} node\r\n * @param {[key: string] => ReactDOMComponent|ReactCompositeComponent}\r\n */\r\nfunction findRoots(node, roots) {\r\n\tArray.from(node.childNodes).forEach(child => {\r\n\t\tif (child._component) {\r\n\t\t\troots[nextRootKey(roots)] = updateReactComponent(child._component);\r\n\t\t} else {\r\n\t\t\tfindRoots(child, roots);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Create a bridge for exposing preact's component tree to React DevTools.\r\n *\r\n * It creates implementations of the interfaces that ReactDOM passes to\r\n * devtools to enable it to query the component tree and hook into component\r\n * updates.\r\n *\r\n * See https://github.com/facebook/react/blob/59ff7749eda0cd858d5ee568315bcba1be75a1ca/src/renderers/dom/ReactDOM.js\r\n * for how ReactDOM exports its internals for use by the devtools and\r\n * the `attachRenderer()` function in\r\n * https://github.com/facebook/react-devtools/blob/e31ec5825342eda570acfc9bcb43a44258fceb28/backend/attachRenderer.js\r\n * for how the devtools consumes the resulting objects.\r\n */\r\nfunction createDevToolsBridge() {\r\n\t// The devtools has different paths for interacting with the renderers from\r\n\t// React Native, legacy React DOM and current React DOM.\r\n\t//\r\n\t// Here we emulate the interface for the current React DOM (v15+) lib.\r\n\r\n\t// ReactDOMComponentTree-like object\r\n\tconst ComponentTree = {\r\n\t\tgetNodeFromInstance(instance) {\r\n\t\t\treturn instance.node;\r\n\t\t},\r\n\t\tgetClosestInstanceFromNode(node) {\r\n\t\t\twhile (node && !node._component) {\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t}\r\n\t\t\treturn node ? updateReactComponent(node._component) : null;\r\n\t\t}\r\n\t};\r\n\r\n\t// Map of root ID (the ID is unimportant) to component instance.\r\n\tlet roots = {};\r\n\tfindRoots(document.body, roots);\r\n\r\n\t// ReactMount-like object\r\n\t//\r\n\t// Used by devtools to discover the list of root component instances and get\r\n\t// notified when new root components are rendered.\r\n\tconst Mount = {\r\n\t\t_instancesByReactRootID: roots,\r\n\r\n\t\t// Stub - React DevTools expects to find this method and replace it\r\n\t\t// with a wrapper in order to observe new root components being added\r\n\t\t_renderNewRootComponent(/* instance, ... */) { }\r\n\t};\r\n\r\n\t// ReactReconciler-like object\r\n\tconst Reconciler = {\r\n\t\t// Stubs - React DevTools expects to find these methods and replace them\r\n\t\t// with wrappers in order to observe components being mounted, updated and\r\n\t\t// unmounted\r\n\t\tmountComponent(/* instance, ... */) { },\r\n\t\tperformUpdateIfNecessary(/* instance, ... */) { },\r\n\t\treceiveComponent(/* instance, ... */) { },\r\n\t\tunmountComponent(/* instance, ... */) { }\r\n\t};\r\n\r\n\t/** Notify devtools that a new component instance has been mounted into the DOM. */\r\n\tconst componentAdded = component => {\r\n\t\tconst instance = updateReactComponent(component);\r\n\t\tif (isRootComponent(component)) {\r\n\t\t\tinstance._rootID = nextRootKey(roots);\r\n\t\t\troots[instance._rootID] = instance;\r\n\t\t\tMount._renderNewRootComponent(instance);\r\n\t\t}\r\n\t\tvisitNonCompositeChildren(instance, childInst => {\r\n\t\t\tchildInst._inDevTools = true;\r\n\t\t\tReconciler.mountComponent(childInst);\r\n\t\t});\r\n\t\tReconciler.mountComponent(instance);\r\n\t};\r\n\r\n\t/** Notify devtools that a component has been updated with new props/state. */\r\n\tconst componentUpdated = component => {\r\n\t\tconst prevRenderedChildren = [];\r\n\t\tvisitNonCompositeChildren(instanceMap.get(component), childInst => {\r\n\t\t\tprevRenderedChildren.push(childInst);\r\n\t\t});\r\n\r\n\t\t// Notify devtools about updates to this component and any non-composite\r\n\t\t// children\r\n\t\tconst instance = updateReactComponent(component);\r\n\t\tReconciler.receiveComponent(instance);\r\n\t\tvisitNonCompositeChildren(instance, childInst => {\r\n\t\t\tif (!childInst._inDevTools) {\r\n\t\t\t\t// New DOM child component\r\n\t\t\t\tchildInst._inDevTools = true;\r\n\t\t\t\tReconciler.mountComponent(childInst);\r\n\t\t\t} else {\r\n\t\t\t\t// Updated DOM child component\r\n\t\t\t\tReconciler.receiveComponent(childInst);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// For any non-composite children that were removed by the latest render,\r\n\t\t// remove the corresponding ReactDOMComponent-like instances and notify\r\n\t\t// the devtools\r\n\t\tprevRenderedChildren.forEach(childInst => {\r\n\t\t\tif (!document.body.contains(childInst.node)) {\r\n\t\t\t\tinstanceMap.delete(childInst.node);\r\n\t\t\t\tReconciler.unmountComponent(childInst);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/** Notify devtools that a component has been unmounted from the DOM. */\r\n\tconst componentRemoved = component => {\r\n\t\tconst instance = updateReactComponent(component);\r\n\t\tvisitNonCompositeChildren(childInst => {\r\n\t\t\tinstanceMap.delete(childInst.node);\r\n\t\t\tReconciler.unmountComponent(childInst);\r\n\t\t});\r\n\t\tReconciler.unmountComponent(instance);\r\n\t\tinstanceMap.delete(component);\r\n\t\tif (instance._rootID) {\r\n\t\t\tdelete roots[instance._rootID];\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\tcomponentAdded,\r\n\t\tcomponentUpdated,\r\n\t\tcomponentRemoved,\r\n\r\n\t\t// Interfaces passed to devtools via __REACT_DEVTOOLS_GLOBAL_HOOK__.inject()\r\n\t\tComponentTree,\r\n\t\tMount,\r\n\t\tReconciler\r\n\t};\r\n}\r\n\r\n/**\r\n * Return `true` if a preact component is a top level component rendered by\r\n * `render()` into a container Element.\r\n */\r\nfunction isRootComponent(component) {\r\n\t// `_parentComponent` is actually `__u` after minification\r\n\tif (component._parentComponent || component.__u) {\r\n\t\t// Component with a composite parent\r\n\t\treturn false;\r\n\t}\r\n\tif (component.base.parentElement && component.base.parentElement[ATTR_KEY]) {\r\n\t\t// Component with a parent DOM element rendered by Preact\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\n/**\r\n * Visit all child instances of a ReactCompositeComponent-like object that are\r\n * not composite components (ie. they represent DOM elements or text)\r\n *\r\n * @param {Component} component\r\n * @param {(Component) => void} visitor\r\n */\r\nfunction visitNonCompositeChildren(component, visitor) {\r\n\tif (!component) return;\r\n\tif (component._renderedComponent) {\r\n\t\tif (!component._renderedComponent._component) {\r\n\t\t\tvisitor(component._renderedComponent);\r\n\t\t\tvisitNonCompositeChildren(component._renderedComponent, visitor);\r\n\t\t}\r\n\t} else if (component._renderedChildren) {\r\n\t\tcomponent._renderedChildren.forEach(child => {\r\n\t\t\tvisitor(child);\r\n\t\t\tif (!child._component) visitNonCompositeChildren(child, visitor);\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * Create a bridge between the preact component tree and React's dev tools\r\n * and register it.\r\n *\r\n * After this function is called, the React Dev Tools should be able to detect\r\n * \"React\" on the page and show the component tree.\r\n *\r\n * This function hooks into preact VNode creation in order to expose functional\r\n * components correctly, so it should be called before the root component(s)\r\n * are rendered.\r\n *\r\n * Returns a cleanup function which unregisters the hooks.\r\n */\r\nexport function initDevTools() {\r\n\tif (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined') {\r\n\t\t// React DevTools are not installed\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Notify devtools when preact components are mounted, updated or unmounted\r\n\tconst bridge = createDevToolsBridge();\r\n\r\n\tconst nextAfterMount = options.afterMount;\r\n\toptions.afterMount = component => {\r\n\t\tbridge.componentAdded(component);\r\n\t\tif (nextAfterMount) nextAfterMount(component);\r\n\t};\r\n\r\n\tconst nextAfterUpdate = options.afterUpdate;\r\n\toptions.afterUpdate = component => {\r\n\t\tbridge.componentUpdated(component);\r\n\t\tif (nextAfterUpdate) nextAfterUpdate(component);\r\n\t};\r\n\r\n\tconst nextBeforeUnmount = options.beforeUnmount;\r\n\toptions.beforeUnmount = component => {\r\n\t\tbridge.componentRemoved(component);\r\n\t\tif (nextBeforeUnmount) nextBeforeUnmount(component);\r\n\t};\r\n\r\n\t// Notify devtools about this instance of \"React\"\r\n\t__REACT_DEVTOOLS_GLOBAL_HOOK__.inject(bridge);\r\n\r\n\treturn () => {\r\n\t\toptions.afterMount = nextAfterMount;\r\n\t\toptions.afterUpdate = nextAfterUpdate;\r\n\t\toptions.beforeUnmount = nextBeforeUnmount;\r\n\t};\r\n}\r\n","import { initDevTools } from './devtools';\r\n\r\ninitDevTools();\r\n\r\n"],"names":["ATTR_KEY","createReactElement","component","constructor","key","props","createReactDOMComponent","node","childNodes","nodeType","Node","ELEMENT_NODE","Array","from","isText","TEXT_NODE","textContent","nodeName","toLowerCase","map","child","_component","updateReactComponent","typeName","element","type","displayName","name","createReactCompositeComponent","_currentElement","base","instance","state","forceUpdate","bind","setState","_instance","_renderedComponent","instanceMap","Map","componentOrNode","newInstance","has","inst","get","assign","set","nextRootKey","roots","Object","keys","length","findRoots","forEach","createDevToolsBridge","ComponentTree","parentNode","document","body","Mount","Reconciler","componentAdded","isRootComponent","_rootID","_renderNewRootComponent","_inDevTools","mountComponent","childInst","componentUpdated","prevRenderedChildren","push","receiveComponent","contains","delete","unmountComponent","componentRemoved","_parentComponent","__u","parentElement","visitNonCompositeChildren","visitor","_renderedChildren","initDevTools","__REACT_DEVTOOLS_GLOBAL_HOOK__","bridge","nextAfterMount","options","afterMount","nextAfterUpdate","afterUpdate","nextBeforeUnmount","beforeUnmount","inject"],"mappings":"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"}